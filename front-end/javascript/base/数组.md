# Array

Array 对象支持在单个变量名下存储多个元素，并提供诸多操作成员的方法。
在实现层面，JavaScript 实际上是将数组元素作为标准的对象属性来存储，把数组索引作为属性名。

## 静态方法

- Array.from()
  从数组类对象或可迭代对象创建一个新的 Array 实例。
- Array.fromAsync() **实验性**
  从异步可迭代、可迭代或类数组对象创建新的 Array 实例。
- Array.isArray()
  如果参数是数组则返回 true ，否则返回 false 。
- Array.of()
  创建一个新的 Array 实例，具有可变数量的参数，而不管参数的数量或类型。

## 实例方法

### 修改自身的方法

- [Array.prototype.unshift()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift) 在数组的前面添加一个或多个元素，并返回数组新的 length。
- [Array.prototype.shift()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/shift) 从数组中移除第一个元素并返回该元素。
- [Array.prototype.pop()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/pop) 从数组中移除最后一个元素并返回该元素。
- [Array.prototype.push()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/push) 在数组末尾添加一个或多个元素，并返回数组新的 length。
- [Array.prototype.splice()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice) 从数组中添加和/或删除元素。
- [Array.prototype.fill()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/fill) 用静态值填充数组中从开始索引到结束索引的所有元素。
- [Array.prototype.copyWithin()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin) 浅复制数组的一部分到同一数组中的另一个位置，并返回它，不会改变原数组的长度。
- [Array.prototype.reverse()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse) 反转数组中元素的顺序。
- [Array.prototype.sort()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) 对数组的元素进行排序并返回该数组。

### 不修改自身的方法

## 创建数组

### 构造函数

```js
const arr1 = new Array(element0, element1, /* … ,*/ elementN)
const arr2 = Array(5) // 创建指定长度的空数组
```

::: tip
调用 Array() 时可以使用或不使用 new。两者都会创建一个新的 Array 实例。
Array(N)中 n 必须为整数，否则会抛出 RangeError: Invalid array length 错误。
:::

使用构造函数创建数组在只有一个参数的情况下，参数的类型不同会表现出不同的行为：

```js
new Array(3) // [empty*3]
new Array('3') // ['3']
```

### 字面量

最常用，也是最推荐使用的方式。

```js
const arr3 = [element0, element1, /* … ,*/ elementN]
```

### Array.of()

`Array.of()` 静态方法通过可变数量的参数创建一个新的 Array 实例，而不考虑参数的数量或类型。
它与构造函数方式之间的区别在于对单个参数的处理：

```js
Array.of(7) // [7]
Array(7) // 由 7 个空槽组成的数组

Array.of(1, 2, 3) // [1, 2, 3]
Array(1, 2, 3) // [1, 2, 3]
```

`of`方法可以在任何接受一个 len 参数表示新数组长度的构造函数上调用：

```js
function NotArray(len) {
  console.log('NotArray called with length', len)
}

console.log(Array.of.call(NotArray, 1, 2, 3))
// NotArray called with length 3
// NotArray { '0': 1, '1': 2, '2': 3, length: 3 }

console.log(Array.of.call(Object)) // [Number: 0] { length: 0 }
```

当调用`of`方法时的`this`不是构造函数时，返回一个普通`Array`对象：

```js
console.log(Array.of.call({}, 1)) // [ 1 ]
```

## 稀疏数组

包含“空槽”属性的数组被称为稀疏数组，这与用`undefined`填充的槽不同。
它会在以下情况下创建：

```js
// Array 构造函数：
const a = Array(5) // [ <5 empty items> ]

// 数组字面量中的连续逗号：
const b = [1, 2, , , 5] // [ 1, 2, <2 empty items>, 5 ]

// 直接给大于 array.length 的索引设置值以形成空槽：
const c = [1, 2]
c[4] = 5 // [ 1, 2, <2 empty items>, 5 ]

// 通过直接设置 .length 拉长一个数组：
const d = [1, 2]
d.length = 5 // [ 1, 2, <3 empty items> ]

// 删除一个元素：
const e = [1, 2, 3, 4, 5]
delete e[2] // [ 1, 2, <1 empty item>, 4, 5 ]
```

数组方法在稀疏数组中的行为并不相同：

## 类数组对象

具有 length 属性，并且索引元素的范围在 0 到 length - 1 之间的对象。如果它没有所有的索引，它将在功能上等同于[稀疏数组](#稀疏数组)。

常见的类数组对象有：

1. Dom 对象，例如[NodeList](https://developer.mozilla.org/zh-CN/docs/Web/API/NodeList)、[HTMLCollection](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCollection);
2. [arguments](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments)对象

它们本身没有数组的方法，但是可以显示的为它们调用数组方法：

```js
function f() {
  console.log(Array.prototype.join.call(arguments, '+'))
}

f('a', 'b') // 'a+b'
```

类数组转化为数组的几种方法：

1. slice
   ```js
   let arr = Array.prototype.slice.call(arguments)
   ```
2. Array.from()
   ```js
   let arr = Array.from(arguments)
   ```
3. 扩展运算符
   ```js
   let arr = [...arguments]
   ```
